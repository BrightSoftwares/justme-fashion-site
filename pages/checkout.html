---
layout: default
permalink: /checkout/
---

<main id='checkout'>
  <h1 class='title'>Checkout</h1>
  <div id='errors'></div>
  <form onsubmit='submitPurchase(event, this)' id='checkoutForm'>
    <section>
      <fieldset>
        <input type='text' name='customer.name' placeholder='Name' required />
        <input type='email'name='customer.email' placeholder='Email' required />
        <input type='text' name='address.address1' placeholder='Address 1'
               required />
        <input type='text' name='address.address2'
               placeholder='Address 2 (optional)' />
        <input type='text' name='address.city' placeholder='City' required />
        <input type='text' name='address.county' placeholder='County' required />
        <div id='countries'></div>
        <input type='text' name='address.postcode' placeholder='Postcode'
               required />
      </fieldset>
      <fieldset id='delivery'>
      </fieldset>
    </section>
    <section>
      <fieldset id='warning'>
        <p>This is demo site. Please use one of the following test card numbers:</p>
        <ul>
          <li>4111111111111111</li>
          <li>5500000000000004</li>
        </ul>
      </fieldset>
      <fieldset id='card'>
      </fieldset>
      <fieldset id='purchase'>
        <div id='order-summary'></div>
        <button type='submit'>Purchase!</button>
      </fieldset>
    </section>
  </form>
</main>

<script>
  renderComponent('errors', Errors);
  renderComponent('countries', CountriesSelect);
  renderComponent('delivery', DeliverySelect);
  renderComponent('card', Card);
  renderComponent('order-summary', OrderSummary);

  function submitPurchase(event, form) {
    event.preventDefault ? event.preventDefault() : event.returnValue = false;
    spinner.show('checkout');
    form.className = 'hide';
    serializeAndPurchase(form);
  }

  JSE.Stores.Order.listen(function() {
    /* Order has errors */
    spinner.hide();
    document.getElementById('checkoutForm').className = '';
  });

  JSE.Actions.completed.listen(function() { window.location.href = '/thankyou'; });

  /* Wake up server */
  SuperAgent.get('{{ site.wake_up }}').end();
</script>